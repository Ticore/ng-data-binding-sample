<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>$digest error</title>
</head>
<body>

    <div ng-app="app" ng-controller="mainCtrl">

        <div ng-repeat="user in users | orderBy:predicate:reverse | limitTo:10">
            <div ng-controller="childCtrl"
                ng-init="lazy('user.score = user.id + 1');" >
                {{user.name}}, {{user.score}}
            </div>
        </div>

    </div>

    <script type="text/javascript" src="../libs/angular-1.1.5.js"></script>
    <script type="text/javascript" src="../libs/ngLazyBind.js"></script>
    <script type="text/javascript">
        /*/

        http://stackoverflow.com/questions/14376879/error-10-digest-iterations-reached-aborting-with-dynamic-sortby-predicate
        
        //*/

        var app = angular.module("app", ["lazyBind"]);

        var mainCtrlFn = function($scope, $lazyBind) {

            $scope.lazy = $lazyBind($scope, true, 1000);

            $scope.$watch(function() {
                console.log("$digest();");
            });

            $scope.predicate = 'score';
            $scope.reverse = true;
            $scope.users = [
                {id: 1, name: 'John'},
                {id: 2, name: 'Ken'},
                {id: 3, name: 'smith'},
                {id: 4, name: 'kevin'},
                {id: 5, name: 'bob'},
                {id: 6, name: 'Dev'},
                {id: 7, name: 'Joe'},
                {id: 8, name: 'kevin'},
                {id: 9, name: 'John'},
                {id: 10, name: 'Ken'},
                {id: 11, name: 'John'},
                {id: 1, name: 'John'},
                {id: 2, name: 'Ken'},
                {id: 3, name: 'smith'},
                {id: 4, name: 'kevin'},
                {id: 5, name: 'bob'},
                {id: 6, name: 'Dev'},
                {id: 7, name: 'Joe'},
                {id: 8, name: 'kevin'},
                {id: 9, name: 'John'},
                {id: 10, name: 'Ken'},
                {id: 11, name: 'John'},
                {id: 1, name: 'John'},
                {id: 2, name: 'Ken'},
                {id: 3, name: 'smith'},
                {id: 4, name: 'kevin'},
                {id: 5, name: 'bob'},
                {id: 6, name: 'Dev'},
                {id: 7, name: 'Joe'},
                {id: 8, name: 'kevin'},
                {id: 9, name: 'John'},
                {id: 10, name: 'Ken'},
                {id: 11, name: 'John'},
                {id: 1, name: 'John'},
                {id: 2, name: 'Ken'},
                {id: 3, name: 'smith'},
                {id: 4, name: 'kevin'},
                {id: 5, name: 'bob'},
                {id: 6, name: 'Dev'},
                {id: 7, name: 'Joe'},
                {id: 8, name: 'kevin'},
                {id: 9, name: 'John'},
                {id: 10, name: 'Ken'},
                {id: 11, name: 'John'},
                {id: 1, name: 'John'},
                {id: 2, name: 'Ken'},
                {id: 3, name: 'smith'},
                {id: 4, name: 'kevin'},
                {id: 5, name: 'bob'},
                {id: 6, name: 'Dev'},
                {id: 7, name: 'Joe'},
                {id: 8, name: 'kevin'},
                {id: 9, name: 'John'},
                {id: 10, name: 'Ken'},
                {id: 11, name: 'John'},
                {id: 1, name: 'John'},
                {id: 2, name: 'Ken'},
                {id: 3, name: 'smith'},
                {id: 4, name: 'kevin'},
                {id: 5, name: 'bob'},
                {id: 6, name: 'Dev'},
                {id: 7, name: 'Joe'},
                {id: 8, name: 'kevin'},
                {id: 9, name: 'John'},
                {id: 10, name: 'Ken'},
                {id: 11, name: 'John'},
                {id: 1, name: 'John'},
                {id: 2, name: 'Ken'},
                {id: 3, name: 'smith'},
                {id: 4, name: 'kevin'},
                {id: 5, name: 'bob'},
                {id: 6, name: 'Dev'},
                {id: 7, name: 'Joe'},
                {id: 8, name: 'kevin'},
                {id: 9, name: 'John'},
                {id: 10, name: 'Ken'},
                {id: 11, name: 'John'},
                {id: 1, name: 'John'},
                {id: 2, name: 'Ken'},
                {id: 3, name: 'smith'},
                {id: 4, name: 'kevin'},
                {id: 5, name: 'bob'},
                {id: 6, name: 'Dev'},
                {id: 7, name: 'Joe'},
                {id: 8, name: 'kevin'},
                {id: 9, name: 'John'},
                {id: 10, name: 'Ken'},
                {id: 11, name: 'John'},
                {id: 1, name: 'John'},
                {id: 2, name: 'Ken'},
                {id: 3, name: 'smith'}
            ]; 

        };


        app.controller("mainCtrl", mainCtrlFn);



        var childCtrlFn = function($scope, $timeout, $lazyBind) {
            $scope.lazy = $lazyBind($scope, true, 1000);
            $scope.fn = function() {
                $timeout(function() {
                    $scope.user.score = $scope.user.id + 1;
                }, 500);
            }
        };
        
        app.controller("childCtrl", childCtrlFn);

    </script>
</body>
</html>